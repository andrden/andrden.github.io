<!doctype html>
<html>
<head>
    <meta charset="utf8">
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-database.js"></script>

    <script>
        // https://www.naishare.com/blog/getting-started-with-firebase-realtime-database-on-the-web

        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyBzdDMv71fEwZzAZW6ATevAT9TWMbRveZg",
            authDomain: "app1-cfe36.firebaseapp.com",
            databaseURL: "https://app1-cfe36-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "app1-cfe36",
            storageBucket: "app1-cfe36.appspot.com",
            messagingSenderId: "1062099327891",
            appId: "1:1062099327891:web:582571408d3e4ed463a666"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        const writeToDatabase = (name, username, gender) => {
            firebase
                .database()
                //.ref("Registration/" + Date.now())
                .ref("Registration/aaa")
                .set({
                    name: name + Date.now(),
                    user: username,
                    msg: document.getElementById('txtIn').value,
                    gender: gender,
                });
        };

        const readFromDatabaseOn = (id) => {
            firebase
                .database()
                .ref(id)
                .on("value", function (snapshot) {
                    console.log(snapshot.val().name);
                    console.log(snapshot.val().user);
                    console.log(snapshot.val().gender);
                    console.log(snapshot.val().msg);
                    document.getElementById('txtOut').innerText = snapshot.val().msg;
                });
        };

        readFromDatabaseOn("Registration/aaa")
    </script>
</head>
<body>
page 3
<label for="txtIn">Input message:</label><input id="txtIn"/>
<button onclick="writeToDatabase('sdf','s1','m')">Write (everyone will see this message)</button>
<br/>
From server:
<div id="txtOut" style="width: 100%; border: 2px dotted blue">...message...</div>
</body>
</html>
